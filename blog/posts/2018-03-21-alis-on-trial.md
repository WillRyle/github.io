---
layout: post
title: ALIS on Trial
date: 2018-03-21 23:00
author: willryle
comments: true
categories: [Irrigator, New Bolton]
---
Our home-brewed autonomous linear irrigation system, ALIS, was <a href="https://willryle.wordpress.com/2017/04/09/alis-the-irrigator-it-moves/" target="_blank" rel="noopener">last seen</a> making a self-powered trip up the driveway with the electronics balanced precariously on the scooter. The task ahead was to assemble the components into a more robust and weatherproof container and get to a stage where the device could earn its living after proving itself on field trials.

<!--more-->
<h3>Project Box</h3>
First order of business was the project box. This would have to house all the electronics, be easily removable and provide an interface to the scooter's motors and irrigation components - the water relay and flow meter - plus any other item that needed to be controlled by the Raspberry Pi. Much searching was done to find a ready-made project box that would do the job, but none had the required size and form factor necessary and it was eventually decided to make a custom box out of fibreglass. This would allow the box to be shaped to fit the scooter and so make best use of the space available.

Before this could be started, the other issue of having the project box easily removable (for software changes, hardware upgrades and additions, and at end of season shut down) had to be resolved. A number of bulkhead cable connectors were looked at, but finding a design that gave the required number of connections capable of taking the amperage the motors were capable of drawing proved problematic.Â  It was then that the scooter's battery connectors offered themselves as a solution. The two 12 volt batteries each reside in a box, wired to a connector. The boxes can be lifted on and off the scooter and dock into a matching receptacles fixed to the scooter chassis. A number of these connectors could be built into the project box and docked into their opposite numbers, fixed to the scooter and wired to motors, water valve etc. The necessary connectors were sourced from the same supplier where the <a href="https://willryle.wordpress.com/2015/04/27/donor-vehicle/">scooter donor vehicle</a> originated, salvaged from two scrap scooters of similar make.

With the project box design now decided, plywood moulds for the box and lid were made and fibreglass materials ordered from an internet supplier. With little experience in fibreglass fabrication, some background reading was required and helpfully the fibreglass materials arrived with an instruction leaflet. With the moulds made, the first step is to wax the surfaces that are to be glassed. This is intended to make the mould easier to remove and several coats of wax are required. After the wax, several layers of gelcoat were applied. This forms the paint-ready finish of the box and needs to be built up to a good thickness to prevent flaking. The gelcoat is a two-part mix, with an accelerant/hardener being added - only a small amount is needed requiring the use of a small syringe to measure out the 1% hardener. The fibreglass itself is the next stage. A chopped strand mat was used as a good thickness was required to give the box strength. The mat is cut to a rough shape with scissors and resin mixed with 1% hardener. The resin is brushed over the mould, the pieces of matting positioned and more resin applied until the whole is soaked. Air bubbles need to be worked out as these would cause weak spots. A second layer of mat was glassed over the first when that had cured, and to provide additional strength and easy fixing of components, a piece of plywood was glassed in between the layers on the base of the box.

With the fibreglass laid up and cured, the mould was to be carefully removed, but its tight fit and shape meant it had to be broken. The finished result was surprisingly good for a first attempt, with only a small patch of gelcoat breaking off. Astonishingly, the lid actually fitted the box. Some trimming and sanding was necessary where the mat had been protruding slightly from the mould. The next job was to make the docking receptacle that would be fixed to the scooter. This was again made in fibreglass and designed such that it could be screwed to the scooter and hold the mating connectors and so allow the box to be dropped into place to make the connections.

[gallery ids="2476,2475,2478,2477,2480,2479" type="slideshow" link="file"]

With the box made, the components were laid out and fixed to a metal base plate cut from the chassis of a defunct PC and the whole screwed to the base of the box into the embedded sheet of plywood. The 24 volt supply from the batteries is wired to one of the four connectors and the corresponding connector in the project box routes this to a fuse box and negative bus bar which in turn supply the Raspberry Pi (through a voltage step-down). Other connectors were wired to connect the water valve to the Pi-controlled relay switch and still more allow the Pi to control the electro-magnetic motor brakes and the spray boom lights, also via relay switches.

[gallery ids="2485,2481,2482,2483" type="slideshow" link="file"]

The mechanism works reasonably well, though some care has to be taken to ensure the connectors are aligned when docking. When in place, battery power is supplied to the project box and the Raspberry Pi boots up, the node-red service starts and the camera website starts, making the irrigator ready for use.
<h3>Spray Boom</h3>
The design of the spray boom was shamelessly modelled on that of the construction crane booms that proliferate about Wellington. Using smooth 10mm reinforcing bar from a local supplier and tubular steel mounting post, the material was cut into lengths and welded together by the ever helpful guys at <a href="https://www.facebook.com/FeatherstonMenzShedInc" target="_blank" rel="noopener">Featherston Menz Shed</a>. The boom is triangular in cross-section with the apex downwards along which the spray hose is fixed. A steel tube mounting allows the boom to be raised or lowered about a length of tube bolted into what was the scooter's seat pillar. The boom has a reach of 3.3 metres and a counter weight brings the centre of gravity back to the mounting post. The water supply comes from a retractable reel hose fixed to a post adjacent to the veggie garden and is secured to the spray boom then routed through the water valve and flow meter to the spray hose. Standard garden hose connectors are used throughout. The scooter's headlight and indicator lights were repurposed such that the indicators mark both ends of the spray boom and the headlight shines along the length of the boom. The lights are controlled by the Raspberry Pi through another of the eight available relay switches and are turned on and off at the start and end of an irrigation sequence. This is not just gratuitous bling though - often the best conditions for irrigation are in the calm of the evening and the lights allow the boom to be seen in low light conditions.

[gallery ids="2489,2486,2488,2487" type="slideshow" link="file"]
<h3>Field Trials and Tribulations</h3>
With all the parts manufactured and assembled, it was time for testing. The device was wheeled to the start point and sent off down range with instructions to motor forward for a number of seconds and then reverse for the same time. This was repeated several times and it became apparent that maintaining a straight course over the ground, even with the steering fixed, was going to be impossible. This came as no surprise and a solution had already been proffered. A guide way was created by installing vertical boards, just wider than the track of the scooter, with the intention of keeping it going astray. This made some improvement, but also introduced its own problems. If the scooter touched the guide way side, it would scrub the wheel forcing it to slow down or stall, thereby preventing accurate positioning by dead reckoning. Furthermore, as the front wheels have a slightly narrower track than the rear, they had more latitude to go off course and when reversing could jam the scooter in the guide way. A possible solution was offered by our visitor from England - fit horizontally mounted, spring-loaded wheels front and back that ran against the guide way sides. The spring loading absorbs any deviation in course and pushes the scooter away from the sides. Implementing this on the front - using bungee cords instead of springs - made a significant improvement. The same arrangement on the rear is in progress, this time a gas strut, of the type used to hold car boot lids open, will serve as a spring.

With more reliable tracking, the row positioning by dead reckoning is more accurate and the irrigator is on the cusp of being let loose and left to its own devices. As it happens, the Summer growing season is at its close, but there's time yet for more trials. Aside from the lessons learned above, another to remember when setting out next season is to plant the veggies in equally-spaced rows - it would make writing the irrigation sequence a lot easier.

Next job will be creating a new body for the irrigator. This will likely involve more fibreglass work. The body has to cover the project box and as much of the mechanicals as possible, allow easy access to the project box and be waterproof. It also needs to allow the camera to be mounted and yet sill connect the cable to the Pi, so more design and fabrication challenges lie ahead.
